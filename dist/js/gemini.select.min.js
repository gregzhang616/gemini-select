!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t)}(function(e){function t(e,t){var i=[];return Array.from?Array.from(e).slice(t||0):("number"!=typeof t||isNaN(t)||i.push(t),i.slice.apply(e,i))}function i(e){return"object"==typeof e&&e instanceof Array}function n(e){return"string"==typeof e}function o(e,i,n){e.removeClass(i).addClass(i).one(c,l(function(o){e.removeClass(i),n.apply(e,t(arguments))})),d&&(e.removeClass(i),n.apply(e,t(arguments)))}function l(e){var i=!1;return function(){var n=this,o=t(arguments);i||(i=!0,e.apply(n,o))}}var a,r="undefined"!=typeof window,s=r&&window.navigator.userAgent.toLowerCase(),d=s&&/msie|trident/.test(s),c=(document.documentMode,"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),u=function(t,n){var l=this,r={defaults:{type:"single",data:[],defaultValue:null,filterable:!1,disabled:!1,size:"small",clearable:!1,name:"",placeholder:"Please select",emptyText:"No matching data",multLimit:0,multMaxHeight:100,zIndex:2008,onChange:null,onShow:null,onHide:null},scrollBarWidth:null,cache:{},value:null,valueHooks:{get:function(){return l.value},set:function(t){var n=l.type,o=l.$dropdown.find(".gmi-select-dropdown__item"),s=r.getObjectKeys(r.cache,t);if("multiple"===n){if(o.removeClass("is-active"),i(s)&&s.length>0)for(var d=0;d<s.length;d++)o.filter('[data-index="'+s[d]+'"]').addClass("is-active");var c=l.$input.find(".gmi-select-selection__tag--wrap");0===t.length?c.hide().siblings(".gmi-select-selection__placeholder").show():c.show().siblings(".gmi-select-selection__placeholder").hide(),void 0!==a&&void 0!==t&&t.toString()!==a.toString()?r.triggerEvent("change.select",{newValue:t}):void 0!==a&&void 0!==t||t===a||r.triggerEvent("change.select",{newValue:t}),r.setMultipleSelTag(c,s),r.setDropDownPosition()}else{var u=l.$input.find(".gmi-input__inner");o.removeClass("is-active"),u.val(""),s&&(o.filter('[data-index="'+s+'"]').addClass("is-active"),u.val(r.cache[s].label)),t!==a&&r.triggerEvent("change.select",{newValue:t})}l.value=t,a=e.extend(a||[],t)}},init:function(){l=e.extend(!0,l,r.defaults,n),r.value="multiple"===l.type?[]:"",r.created()},created:function(){var n=e("body"),o=l.data,a=l.zIndex,s=r.generateInputDOM(),d=r.generateDropDownDOM();l.$input=e(s).insertAfter(t),l.$dropdown=e(d).appendTo(n).css({position:"absolute",zIndex:parseInt(a,10)}),l.onChange&&t.on("change.select",l.onChange),null!==l.defaultValue&&r.valueHooks.set(l.defaultValue),l.$scrollbar=l.$dropdown.find(".gmi-select-dropdown__inner__bar"),r.setInnerScrollBarHeight(),(!o||!i(o)||i(o)&&0===o.length)&&l.$dropdown.find(".gmi-select-dropdown__inner__cnt").hide().siblings(".gmi-select-dropdown__inner__empty").show(),t.hide(),r.bindEvent()},bindEvent:function(){var n=l.$dropdown.find(".gmi-select-dropdown__inner__cnt");e(document).on("click.select",function(){r.hideDropDown()}),e(window).on("resize.select",function(){r.setDropDownPosition()}),e(window).on("scroll.select",function(){r.setDropDownPosition()}),l.$input.on("click.select",function(t){var n=e(t.currentTarget),o=e(t.target);if(o.is('.gmi-tag-icon[data-role="clear"]')){var l=o.parents(".gmi-tag").eq(0).data("sel-tag-dt");return i(r.value)&&r.value.length>0&&r.value.indexOf(l.value)>-1&&(r.value.splice(r.value.indexOf(l.value),1),r.valueHooks.set(r.value),0===r.value.length&&n.find('.gmi-input__icon[data-role="clear"]').hide().siblings('.icon-arrowdown[data-role="arrow"]').show()),!1}return o.is('.gmi-input__icon[data-role="clear"]')?(r.reset(),!1):!n.hasClass("is-disabled")&&(r.showDropDown(),void t.stopPropagation())}).on("mouseenter.select",function(t){var n=l.type,o=l.value;if(l.clearable)if("multiple"===n){if(o&&i(o)&&o.length>0){var a=e(t.currentTarget);a.find('.gmi-input__icon[data-role="clear"]').show().siblings('.icon-arrowdown[data-role="arrow"]').hide()}}else if(void 0!==o&&""!==o&&null!==o){var a=e(t.currentTarget);a.find('.gmi-input__icon[data-role="clear"]').show().siblings('.icon-arrowdown[data-role="arrow"]').hide()}}).on("mouseleave.select",function(t){l.clearable&&e(t.currentTarget).find('.gmi-input__icon[data-role="clear"]').hide().siblings('.icon-arrowdown[data-role="arrow"]').show()}),l.$dropdown.on("click.select",function(t){var i,n,o=e(t.target),a=l.type;o.is(".gmi-select-dropdown__item")&&!o.hasClass("is-disabled")&&(i=o.data("index"),n=r.cache[i].value,"multiple"===a?(r.value.indexOf(n)>-1?r.value.splice(r.value.indexOf(n),1):r.value.push(n),r.valueHooks.set(r.value)):(r.value=n,o.hasClass("is-active")||r.valueHooks.set(r.value),r.hideDropDown())),t.stopPropagation()}).on("mouseenter.select",function(){l.$scrollbar.css("opacity",1)}).on("mouseleave.select",function(){l.$scrollbar.css("opacity",0)}),n.on("scroll.select",function(t){var i=e(this).parents(".gmi-select-dropdown__inner").eq(0),n=l.$scrollbar.height(),o=i.height(),a=e(this).scrollTop(),r=e(this).find(">.gmi-select-dropdown__inner__cnt__list").height(),s=a/r*o,d=parseInt(l.$scrollbar.css("top").replace(/px/,""),10);n+s>o?l.$scrollbar.css({transform:"translateY("+(o-n-2*d)+"px)","-ms-transform":"translateY("+(o-n-2*d)+"px)"}):l.$scrollbar.css({transform:"translateY("+s+"px)","-ms-transform":"translateY("+s+"px)"})}),e.isFunction(l.onShow)&&t.on("show.select",l.onShow),e.isFunction(l.onHide)&&t.on("hide.select",l.onHide)},generateInputDOM:function(){var e=l.type,t=l.name,i=l.clearable,n=l.placeholder,o=l.multMaxHeight,a=r.getSelInputClasses("input"),s=r.getScrollBarWidth(),d="";return d+='<div class="gmi-select '+a+'">',"single"===e||"group"===e?(d+='<div class="gmi-input">',i&&(d+='<em data-role="clear" class="gmi-input__icon icon-clear1" style="display: none;"></em>'),d+='<em data-role="arrow" class="gmi-input__icon icon-arrowdown"></em><input type="text" name="'+t+'" class="gmi-input__inner" readonly placeholder="'+n+'"></div><div class="resize-triggers"><div class="expand-trigger"></div><div class="contract-trigger"></div></div>'):"multiple"===e&&(d+='<div class="gmi-select-selection" data-name="'+t+'">',d+='<div class="gmi-select-selection__inner" style="max-height:'+o+"px;margin-right: -"+s+"px;margin-bottom: -"+s+'px;"><div class="gmi-select-selection__tag--wrap" style="display: none;"></div><span class="gmi-select-selection__placeholder">'+n+'</span><em data-role="arrow" class="gmi-select-selection__icon icon-arrowdown"></em>',i&&(d+='<em data-role="clear" class="gmi-input__icon icon-clear1" style="display: none;"></em>'),d+="</div></div>"),d+="</div>"},generateDropDownDOM:function(){var t,i=l.type,n=l.data,o=l.emptyText,a=r.getSelInputClasses("dropdown"),s=r.getScrollBarWidth(),d="";if(d+='<div class="gmi-select-dropdown placement-top '+a+'" style="left: -9999em;visibility: hidden;"><div class="gmi-select-dropdown__inner"><div class="gmi-select-dropdown__inner__cnt" style="margin-right: -'+s+"px; margin-bottom: -"+s+'px"><ul class="gmi-select-dropdown__inner__cnt__list">',"single"===i||"multiple"===i)for(var c=0;c<n.length;c++)t=n[c].disabled?"is-disabled":"",d+='<li data-index="uid'+c+'" class="gmi-select-dropdown__item '+t+'">'+n[c].label+"</li>",r.cache["uid"+c]=n[c];else if("group"===i)for(var c=0;c<n.length;c++){var u=n[c];if(e.isPlainObject(u)){d+='<ul class="gmi-select-group__wrapper"><li class="gmi-select-group__title">'+u.title+'</li><li class="gmi-select-group__cnt"><ul class="gmi-select-group">';for(var p=0;p<u.options.length;p++)t=u.options[p].disabled?"is-disabled":"",d+='<li data-index="uid'+c+p+'" class="gmi-select-dropdown__item '+t+'">'+u.options[p].label+"</li>",r.cache["uid"+c+p]=u.options[p];d+="</ul></li></ul>"}}return d+='<div class="resize-triggers"><div class="expand-trigger"></div><div class="contract-trigger"></div></div>',d+="</ul></div>",d+='<div class="gmi-select-dropdown__inner__bar is-vertical"><div class="gmi-select-scrollbar__thumb"></div></div>',d+='<div class="gmi-select-dropdown__inner__empty" style="display: none;">'+o+"</div>",d+="</div></div>"},setMultipleSelTag:function(t,n){var o;if(t.find(".gmi-tag").remove(),i(n)&&n.length>0)for(var l=0;l<n.length;l++)o='<div class="gmi-tag"><span class="gmi-tag-text">'+r.cache[n[l]].label+'</span><em data-role="clear" class="gmi-tag-icon icon-clear"></em></div>',e(o).appendTo(t).data("sel-tag-dt",r.cache[n[l]])},getSelInputClasses:function(){var e=arguments[0],t=l.type,i=l.size,n=[];switch("group"===t?n.push("is-group"):"multiple"===t&&n.push("is-multiple"),l.clearable&&"input"===e&&n.push("is-clearable"),l.disabled&&"input"===e&&n.push("is-disabled"),i){case"small":n.push("");break;case"medium":n.push("medium");break;case"large":n.push("large")}return n.join(" ")},getProportionWidthCntAndWrap:function(){var e=l.$dropdown,t=e.find(".gmi-select-dropdown__inner"),i=e.find(".gmi-select-dropdown__inner__cnt__list");return t.height()/i.height()},setInnerScrollBarHeight:function(){var e=l.$scrollbar,t=e.height();t=(t*r.getProportionWidthCntAndWrap()).toFixed(3),e.css("height",t+"px")},getDropDownPosition:function(){var t=l.$input,i=l.$dropdown,n=e(window).height(),o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=t.outerHeight(),r=l.$dropdown.outerHeight(),s=t.offset().top,d=t.offset().left;return s-o>r&&s-o+a+r>n?(s-=r+2*Number(l.$dropdown.css("margin-top").replace(/px/,"")),i.removeClass("placement-top").addClass("placement-bottom")):(s+=a,i.removeClass("placement-bottom").addClass("placement-top")),{top:s,left:d}},setDropDownPosition:function(){var e=r.getDropDownPosition();l.$dropdown.css({top:e.top+"px",left:e.left+"px"})},showDropDown:function(){var e=l.type,t=l.$input,i=l.$dropdown,n="multiple"===e?t.find('.gmi-select-selection__icon[data-role="arrow"]'):t.find('.gmi-input__icon[data-role="arrow"]');"visible"!==i.css("visibility")&&(i.css("visibility","visible"),r.setDropDownPosition(),o(n,"icon-rotate-up",function(){n.addClass("rotate-to-up")}),o(i,"dp-show",function(){r.triggerEvent("show.select")}))},hideDropDown:function(){var e=l.type,t=l.$input,i="multiple"===e?t.find('.gmi-select-selection__icon[data-role="arrow"]'):t.find('.gmi-input__icon[data-role="arrow"]');o(l.$dropdown,"icon-rotate-down",function(){i.removeClass("rotate-to-up")}),o(l.$dropdown,"dp-hide",function(){l.$dropdown.css("visibility","hidden").css("left","-9999em"),r.triggerEvent("hide.select")})},triggerEvent:function(i,n){var o=e.Event(i,n);return t.trigger(o),o},getScrollBarWidth:function(){if(null!==r.scrollBarWidth)return r.scrollBarWidth;var e=document.body||document.documentElement,t=document.createElement("div");t.className="gmi-scrollbar",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999em",e.appendChild(t);var i=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var o=n.offsetWidth;return t.parentNode.removeChild(t),r.scrollBarWidth=i-o,r.scrollBarWidth},getObjectKeys:function(t,n){var o;if(e.isPlainObject(t))if(i(n)&&n.length>0){o=[];for(var l in t)for(var a=0;a<n.length;a++)if(t[l].value===n[a]){o.push(l);break}}else for(var r in t)if(t[r].value===n){o=r;break}return o},reset:function(){var e=l.type,t=l.$input.find('.gmi-input__icon[data-role="clear"]');r.valueHooks.set("multiple"===e?[]:""),r.value="multiple"===e?[]:"",t.is(":hidden")||t.hide().siblings('.icon-arrowdown[data-role="arrow"]').show()}};l.version="1.0.0",l.getValue=function(){return r.valueHooks.get()},l.setValue=function(e){r.valueHooks.set(e)},l.reset=function(){r.reset()},r.init()};e.fn.select=function(i){var o,l=t(arguments,1),i=i||{},a=this;return a.each(function(){var t,a=e(this).data("select");if(!a){if(/destroy/.test(i))return!1;if(!n(i))return e(this).data("select",a=new u(e(this),i))}a&&n(i)&&e.isFunction(t=a[i])&&(o=t.apply(a,l))}),void 0===o?a:o},e.fn.select.constructor=u,Array.prototype.indexOf=function(e,t){var i=-1;t=1*t||0;for(var n=0,o=this.length;n<o;n++)if(n>=t&&this[n]===e){i=n;break}return i}},window.jQuery);