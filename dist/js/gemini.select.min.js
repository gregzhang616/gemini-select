!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t)}(function(e){function t(e,t){var n=[];return Array.from?Array.from(e).slice(t||0):("number"!=typeof t||isNaN(t)||n.push(t),n.slice.apply(e,n))}function n(e){return"object"==typeof e&&e instanceof Array}function i(e){return"string"==typeof e}function o(e){return"number"==typeof e&&!isNaN(e)}function r(e,n,i){e.removeClass(n).addClass(n).one(u,a(function(o){e.removeClass(n),i.apply(e,t(arguments))})),d&&(e.removeClass(n),i.apply(e,t(arguments)))}function a(e){var n=!1;return function(){var i=this,o=t(arguments);n||(n=!0,e.apply(i,o))}}var l,s="undefined"!=typeof window,c=s&&window.navigator.userAgent.toLowerCase(),d=c&&/msie|trident/.test(c),u=(document.documentMode,"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),p=function(t,i){var a=this,s={defaults:{type:"single",data:[],defaultValue:null,filterable:!1,disabled:!1,size:"small",clearable:!1,name:"",placeholder:"Please select",emptyText:"No matching data",multLimit:0,multMaxHeight:100,zIndex:2008,onChange:null,onShow:null,onHide:null},scrollBarWidth:null,cache:{},value:null,currentPos:0,valueHooks:{get:function(){return a.value},set:function(t){var i=a.type,o=a.$dropdown.find(".gmi-select-dropdown__item"),r=s.getObjectKeys(s.cache,t);if("multiple"===i){if(o.removeClass("is-active"),n(r)&&r.length>0)for(var c=0;c<r.length;c++)o.filter('[data-index="'+r[c]+'"]').addClass("is-active");var d=a.$input.find(".gmi-select-selection__tag--wrap");0===t.length?d.hide().siblings(".gmi-select-selection__placeholder").show():d.show().siblings(".gmi-select-selection__placeholder").hide(),void 0!==l&&void 0!==t&&t.toString()!==l.toString()?s.triggerEvent("change.select",{newValue:t}):void 0!==l&&void 0!==t||t===l||s.triggerEvent("change.select",{newValue:t}),s.setMultipleSelTag(d,r),s.setDropDownPosition()}else{var u=a.$input.find(".gmi-input__inner");o.removeClass("is-active"),u.val(""),r&&(o.filter('[data-index="'+r+'"]').addClass("is-active"),u.val(s.cache[r].label)),t!==l&&s.triggerEvent("change.select",{newValue:t})}a.value=t,l=e.extend(l||[],t)}},init:function(){a=e.extend(!0,a,s.defaults,i),a.barDragging=!1,s.value="multiple"===a.type?[]:"",s.created()},created:function(){var i=e("body"),o=a.data,r=a.zIndex,l=s.generateInputDOM(),c=s.generateDropDownDOM();a.$input=e(l).insertAfter(t),a.$dropdown=e(c).appendTo(i).css({position:"absolute",zIndex:parseInt(r,10)}),a.onChange&&t.on("change.select",a.onChange),null!==a.defaultValue&&s.valueHooks.set(a.defaultValue),a.$scrollbar=a.$dropdown.find(".gmi-select-dropdown__inner__bar"),s.setInnerScrollBarHeight(),(!o||!n(o)||n(o)&&0===o.length)&&a.$dropdown.find(".gmi-select-dropdown__inner__cnt").hide().siblings(".gmi-select-dropdown__inner__empty").show(),t.hide(),s.bindEvent()},bindEvent:function(){var i=a.$dropdown.find(".gmi-select-dropdown__inner__cnt");e(document).on("click.select",function(){s.hideDropDown()}),e(window).on("resize.select",function(){s.setDropDownPosition()}),e(window).on("scroll.select",function(){s.setDropDownPosition()}),a.$input.on("click.select",function(t){var i=e(t.currentTarget),o=e(t.target);if(o.is('.gmi-tag-icon[data-role="clear"]')){var r=o.parents(".gmi-tag").eq(0).data("sel-tag-dt");return n(s.value)&&s.value.length>0&&s.value.indexOf(r.value)>-1&&(s.value.splice(s.value.indexOf(r.value),1),s.valueHooks.set(s.value),0===s.value.length&&i.find('.gmi-input__icon[data-role="clear"]').hide().siblings('.icon-arrowdown[data-role="arrow"]').show()),!1}return o.is('.gmi-input__icon[data-role="clear"]')?(s.reset(),!1):!i.hasClass("is-disabled")&&(s.showDropDown(),void t.stopPropagation())}).on("mouseenter.select",function(t){var i=a.type,o=a.value;if(a.clearable)if("multiple"===i){if(o&&n(o)&&o.length>0){var r=e(t.currentTarget);r.find('.gmi-input__icon[data-role="clear"]').show().siblings('.icon-arrowdown[data-role="arrow"]').hide()}}else if(void 0!==o&&""!==o&&null!==o){var r=e(t.currentTarget);r.find('.gmi-input__icon[data-role="clear"]').show().siblings('.icon-arrowdown[data-role="arrow"]').hide()}}).on("mouseleave.select",function(t){a.clearable&&e(t.currentTarget).find('.gmi-input__icon[data-role="clear"]').hide().siblings('.icon-arrowdown[data-role="arrow"]').show()}),a.$dropdown.on("click.select",function(t){var n,i,o=e(t.target),r=a.type;o.is(".gmi-select-dropdown__item")&&!o.hasClass("is-disabled")&&(n=o.data("index"),i=s.cache[n].value,"multiple"===r?(s.value.indexOf(i)>-1?s.value.splice(s.value.indexOf(i),1):s.value.push(i),s.valueHooks.set(s.value)):(s.value=i,o.hasClass("is-active")||s.valueHooks.set(s.value),s.hideDropDown())),t.stopPropagation()}).on("mouseenter.select",function(t){e(t.delegateTarget).find(".gmi-select-dropdown__inner__cnt__list").outerHeight()>parseInt(i.css("max-height").replace(/px/,""),10)&&a.$scrollbar.css("opacity",1)}).on("mouseleave.select",function(){1===Number(a.$scrollbar.css("opacity"))&&a.$scrollbar.css("opacity",0)}),i.on("scroll.select",function(t){var n=e(this).parents(".gmi-select-dropdown__inner").eq(0),i=a.$scrollbar.height(),o=n.height(),r=e(this).scrollTop(),l=e(this).find(">.gmi-select-dropdown__inner__cnt__list").height(),c=r/l*o,d=parseInt(a.$scrollbar.css("top").replace(/px/,""),10);i+c>o?(a.$scrollbar.css({transform:"translateY("+(o-i-2*d)+"px)","-ms-transform":"translateY("+(o-i-2*d)+"px)"}),s.translateY=o-i-2*d):(a.$scrollbar.css({transform:"translateY("+c+"px)","-ms-transform":"translateY("+c+"px)"}),s.translateY=c)}),a.$scrollbar.on("mousedown",function(t){s.onDragStart(t),e(window).on("mousemove",s.onDragging).on("mouseup",s.onDragEnd).on("contextmenu",s.onDragEnd),t.preventDefault()}),e.isFunction(a.onShow)&&t.on("show.select",a.onShow),e.isFunction(a.onHide)&&t.on("hide.select",a.onHide)},generateInputDOM:function(){var e=a.type,t=a.name,n=a.clearable,i=a.placeholder,o=a.multMaxHeight,r=s.getSelInputClasses("input"),l=s.getScrollBarWidth(),c="";return c+='<div class="gmi-select '+r+'">',"single"===e||"group"===e?(c+='<div class="gmi-input">',n&&(c+='<em data-role="clear" class="gmi-input__icon icon-clear1" style="display: none;"></em>'),c+='<em data-role="arrow" class="gmi-input__icon icon-arrowdown"></em><input type="text" name="'+t+'" class="gmi-input__inner" readonly placeholder="'+i+'"></div><div class="resize-triggers"><div class="expand-trigger"></div><div class="contract-trigger"></div></div>'):"multiple"===e&&(c+='<div class="gmi-select-selection" data-name="'+t+'">',c+='<div class="gmi-select-selection__inner" style="max-height:'+o+"px;margin-right: -"+l+"px;margin-bottom: -"+l+'px;"><div class="gmi-select-selection__tag--wrap" style="display: none;"></div><span class="gmi-select-selection__placeholder">'+i+'</span><em data-role="arrow" class="gmi-select-selection__icon icon-arrowdown"></em>',n&&(c+='<em data-role="clear" class="gmi-input__icon icon-clear1" style="display: none;"></em>'),c+="</div></div>"),c+="</div>"},generateDropDownDOM:function(){var t,n=a.type,i=a.data,o=a.emptyText,r=s.getSelInputClasses("dropdown"),l=s.getScrollBarWidth(),c="";if(c+='<div class="gmi-select-dropdown placement-top '+r+'" style="left: -9999em;visibility: hidden;"><div class="gmi-select-dropdown__inner"><div class="gmi-select-dropdown__inner__cnt" style="margin-right: -'+l+"px; margin-bottom: -"+l+'px"><ul class="gmi-select-dropdown__inner__cnt__list">',"single"===n||"multiple"===n)for(var d=0;d<i.length;d++)t=i[d].disabled?"is-disabled":"",c+='<li data-index="uid'+d+'" class="gmi-select-dropdown__item '+t+'">'+i[d].label+"</li>",s.cache["uid"+d]=i[d];else if("group"===n)for(var d=0;d<i.length;d++){var u=i[d];if(e.isPlainObject(u)){c+='<ul class="gmi-select-group__wrapper"><li class="gmi-select-group__title">'+u.title+'</li><li class="gmi-select-group__cnt"><ul class="gmi-select-group">';for(var p=0;p<u.options.length;p++)t=u.options[p].disabled?"is-disabled":"",c+='<li data-index="uid'+d+p+'" class="gmi-select-dropdown__item '+t+'">'+u.options[p].label+"</li>",s.cache["uid"+d+p]=u.options[p];c+="</ul></li></ul>"}}return c+='<div class="resize-triggers"><div class="expand-trigger"></div><div class="contract-trigger"></div></div>',c+="</ul></div>",c+='<div class="gmi-select-dropdown__inner__bar is-vertical"><div class="gmi-select-scrollbar__thumb"></div></div>',c+='<div class="gmi-select-dropdown__inner__empty" style="display: none;">'+o+"</div>",c+="</div></div>"},setMultipleSelTag:function(t,i){var o;if(t.find(".gmi-tag").remove(),n(i)&&i.length>0)for(var r=0;r<i.length;r++)o='<div class="gmi-tag"><span class="gmi-tag-text">'+s.cache[i[r]].label+'</span><em data-role="clear" class="gmi-tag-icon icon-clear"></em></div>',e(o).appendTo(t).data("sel-tag-dt",s.cache[i[r]])},getSelInputClasses:function(){var e=arguments[0],t=a.type,n=a.size,i=[];switch("group"===t?i.push("is-group"):"multiple"===t&&i.push("is-multiple"),a.clearable&&"input"===e&&i.push("is-clearable"),a.disabled&&"input"===e&&i.push("is-disabled"),n){case"small":i.push("");break;case"medium":i.push("medium");break;case"large":i.push("large")}return i.join(" ")},getProportionWidthCntAndWrap:function(){var e=a.$dropdown,t=e.find(".gmi-select-dropdown__inner"),n=e.find(".gmi-select-dropdown__inner__cnt__list");return t.outerHeight()/n.outerHeight()},setInnerScrollBarHeight:function(){var e=a.$scrollbar,t=e.height();t=(t*s.getProportionWidthCntAndWrap()).toFixed(3),e.css("height",t+"px")},getDropDownPosition:function(){var t=a.$input,n=a.$dropdown,i=e(window).height(),o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,r=t.outerHeight(),l=a.$dropdown.outerHeight(),s=t.offset().top,c=t.offset().left;return s-o>l&&s-o+r+l>i?(s-=l+2*Number(a.$dropdown.css("margin-top").replace(/px/,"")),n.removeClass("placement-top").addClass("placement-bottom")):(s+=r,n.removeClass("placement-bottom").addClass("placement-top")),{top:s,left:c}},setDropDownPosition:function(){var e=s.getDropDownPosition();a.$dropdown.css({top:e.top+"px",left:e.left+"px"})},showDropDown:function(){var e=a.type,t=a.$input,n=a.$dropdown,i="multiple"===e?t.find('.gmi-select-selection__icon[data-role="arrow"]'):t.find('.gmi-input__icon[data-role="arrow"]');"visible"!==n.css("visibility")&&(n.css("visibility","visible"),s.setDropDownPosition(),r(i,"icon-rotate-up",function(){i.addClass("rotate-to-up")}),r(n,"dp-show",function(){s.triggerEvent("show.select")}))},hideDropDown:function(){var e=a.type,t=a.$input,n="multiple"===e?t.find('.gmi-select-selection__icon[data-role="arrow"]'):t.find('.gmi-input__icon[data-role="arrow"]');r(a.$dropdown,"icon-rotate-down",function(){n.removeClass("rotate-to-up")}),r(a.$dropdown,"dp-hide",function(){a.$dropdown.css("visibility","hidden").css("left","-9999em"),s.triggerEvent("hide.select")})},triggerEvent:function(n,i){var o=e.Event(n,i);return t.trigger(o),o},getScrollBarWidth:function(){if(null!==s.scrollBarWidth)return s.scrollBarWidth;var e=document.body||document.documentElement,t=document.createElement("div");t.className="gmi-scrollbar",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999em",e.appendChild(t);var n=t.offsetWidth;t.style.overflow="scroll";var i=document.createElement("div");i.style.width="100%",t.appendChild(i);var o=i.offsetWidth;return t.parentNode.removeChild(t),s.scrollBarWidth=n-o,s.scrollBarWidth},onDragStart:function(e){a.barDragging=!0,s.startY=e.clientY,o(s.translateY)&&(s.currentPos=s.translateY),a.$scrollbar.css({transform:"translateY("+s.currentPos+"px)","-ms-transform":"translateY("+s.currentPos+"px)"})},onDragging:function(e){var t,n=a.$dropdown.find(".gmi-select-dropdown__inner__cnt"),i=n.get(0).clientHeight,o=a.$scrollbar.outerHeight(),r=parseInt(a.$scrollbar.css("top").replace(/px/,""),10),l=s.getProportionWidthCntAndWrap(),c=s.currentPos;a.barDragging&&(s.currentY=e.clientY,t=s.currentY-s.startY,void 0===s.translateY&&(s.translateY=0),s.translateY+t+s.currentPos<0?c=0:s.currentPos+t+o+r>=i?c=i-o-2*r:c+=t,s.translateY=c,n.scrollTop(c/l),a.$scrollbar.css({transform:"translateY("+c+"px)","-ms-transform":"translateY("+c+"px)"}))},onDragEnd:function(t){a.barDragging&&(setTimeout(function(){a.barDragging=!1},0),s.currentPos=s.translateY,e(window).off("mousemove",s.onDragging),e(window).off("mouseup",s.onDragEnd),e(window).off("contextmenu",s.onDragEnd))},getObjectKeys:function(t,i){var o;if(e.isPlainObject(t))if(n(i)&&i.length>0){o=[];for(var r in t)for(var a=0;a<i.length;a++)if(t[r].value===i[a]){o.push(r);break}}else for(var l in t)if(t[l].value===i){o=l;break}return o},reset:function(){var e=a.type,t=a.$input.find('.gmi-input__icon[data-role="clear"]');s.valueHooks.set("multiple"===e?[]:""),s.value="multiple"===e?[]:"",t.is(":hidden")||t.hide().siblings('.icon-arrowdown[data-role="arrow"]').show()}};a.version="1.0.0",a.getValue=function(){return s.valueHooks.get()},a.setValue=function(e){s.valueHooks.set(e)},a.reset=function(){s.reset()},s.init()};e.fn.select=function(n){var o,r=t(arguments,1),n=n||{},a=this;return a.each(function(){var t,a=e(this).data("select");if(!a){if(/destroy/.test(n))return!1;if(!i(n))return e(this).data("select",a=new p(e(this),n))}a&&i(n)&&e.isFunction(t=a[n])&&(o=t.apply(a,r))}),void 0===o?a:o},e.fn.select.constructor=p,Array.prototype.indexOf=function(e,t){var n=-1;t=1*t||0;for(var i=0,o=this.length;i<o;i++)if(i>=t&&this[i]===e){n=i;break}return n}},window.jQuery);